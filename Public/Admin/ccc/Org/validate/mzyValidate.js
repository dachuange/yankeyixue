function mzy_validate(_this,submitUrl,errorClass,style){var ruleObj=$(_this).find("*[rule]");ruleObj.attr("validate",0),isset(errorClass)&&ruleObj.removeClass(errorClass);for(var j=0;j<ruleObj.length;j++){var eqRuleObj=ruleObj.eq(j),ruleArr=eqRuleObj.attr("rule").split("|"),con=$.trim(eqRuleObj.val()),msgArr="";eqRuleObj.attr("msg")&&(msgArr=eqRuleObj.attr("msg").split("|"));for(var i=0;i<ruleArr.length;i++){if("required"==ruleArr[i]&&empty(con))return mzy_message(eqRuleObj,msgArr[i],errorClass,style),!1;if(/maxlen:\d+/i.test(ruleArr[i])){var len=ruleArr[i].split(":")[1];if(con.length>len)return mzy_message(eqRuleObj,msgArr[i],errorClass,style),!1}else if(/minlen:\d+/i.test(ruleArr[i])){var len=ruleArr[i].split(":")[1];if(con.length<len)return mzy_message(eqRuleObj,msgArr[i],errorClass,style),!1}else if("http"==ruleArr[i]){if(!empty(con)&&!/^(http[s]?:)?(\/{2})?(\w+\.)?\w+(\.(com|cn|cc|org|net|com.cn))/i.test(con))return mzy_message(eqRuleObj,msgArr[i],errorClass,style),!1}else if(empty(con)||"email"!=ruleArr[i]){if(empty(con)||"phone"!=ruleArr[i]){if(empty(con)||"tel"!=ruleArr[i]){if(empty(con)||"tel,phone"!=ruleArr[i]){if(!empty(con)&&/regexp/i.test(ruleArr[i])){var reg=ruleArr[i].split(":")[1];if(eval(reg)instanceof RegExp){var trueReg=eval(reg);if(!trueReg.test(con))return mzy_message(eqRuleObj,msgArr[i],errorClass,style),!1}}else if(empty(con)||"identity"!=ruleArr[i]){if(empty(con)||"china"!=ruleArr[i]){if(empty(con)||"qq"!=ruleArr[i]){if(empty(con)||"date"!=ruleArr[i]){if(!empty(con)&&/num:\w+/i.test(ruleArr[i])){if(!/^\d+$/.test(con))return mzy_message(eqRuleObj,msgArr[i],errorClass,style),!1;var num=ruleArr[i].split(":")[1];if(num=num.split(/\s*,\s*/),con=parseInt(con),con<num[0]||con>num[1])return mzy_message(eqRuleObj,msgArr[i],errorClass,style),!1}else if(!empty(con)&&/confirm:\w+/i.test(ruleArr[i])){var inputName=ruleArr[i].split(":")[1];if($("[name="+inputName+"]").val()!=eqRuleObj.val())return mzy_message(eqRuleObj,msgArr[i],errorClass,style),!1}else if(!empty(con)&&/ajax:\w+/i.test(ruleArr[i])){var requestUrl=ruleArr[i].split(":")[1],bool;if($.ajax({type:"post",url:requestUrl,async:!1,data:eqRuleObj.serialize(),success:function(a){bool=a}}),"0"==bool)return mzy_message(eqRuleObj,msgArr[i],errorClass,style),!1}}else if(!/^\d{4}-[01]?\d-[0123]?\d|\d{4}[01]?\d[0123]?\d$/.test(con))return mzy_message(eqRuleObj,msgArr[i],errorClass,style),!1}else if(!/^\d{5,12}$/.test(con))return mzy_message(eqRuleObj,msgArr[i],errorClass,style),!1}else if(!/^([^u4e00-u9fa5]|\w)+$/i.test(con))return mzy_message(eqRuleObj,msgArr[i],errorClass,style),!1}else if(!/^(\d{15}|\d{18})$/.test(con))return mzy_message(eqRuleObj,msgArr[i],errorClass,style),!1}else if(!/^(?:\(\d{3,4}\)|\d{3,4}-?)\d{8}$/.test(con)&&!/^\d{11}$/.test(con))return mzy_message(eqRuleObj,msgArr[i],errorClass,style),!1}else if(!/^(?:\(\d{3,4}\)|\d{3,4}-?)\d{8}$/.test(con))return mzy_message(eqRuleObj,msgArr[i],errorClass,style),!1}else if(!/^\d{11}$/.test(con))return mzy_message(eqRuleObj,msgArr[i],errorClass,style),!1}else if(!/^([a-zA-Z0-9_\-\.])+@([a-zA-Z0-9_-])+((\.[a-zA-Z0-9_-]{2,3}){1,2})$/i.test(con))return mzy_message(eqRuleObj,msgArr[i],errorClass,style),!1}eqRuleObj.attr("validate",1)}return $(_this).find("*[validate=0]").length>0?!1:($("form").attr("action",submitUrl),!0)}function mzy_message(a,b,c,d){isset(c)&&a.addClass(c);var e=isset(b)?b:"操作失败",d=isset(d)?d:1;if(1==d)$(".mzy_message").remove(),$("body").append('<div class="mzy_message">'+e+"</div>"),$(".mzy_message").animate({top:"0px"},500,function(){setTimeout(function(){$(".mzy_message").animate({top:"-50px"})},1e3)});else if(2==d){var f='<div class="mzy_bg">			<div class="mzy_bg_content">				<span class="mzy_msg">'+e+'</span> <span class="mzy_close">X</span>			</div>		</div>';$(".mzy_bg").remove(),$("body").append(f),$(".mzy_bg").fadeIn(500);var g=($(window).width()-$(".mzy_bg_content").width())/2,h=($(window).height()-$(".mzy_bg_content").height())/3;$(".mzy_bg_content").css({left:g,top:h}),$(".mzy_close").click(function(){$(".mzy_bg").fadeOut()})}}function isset(a){return"undefined"==typeof a?!1:!0}function empty(a){return""==a?!0:!1}